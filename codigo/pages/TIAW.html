<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>InvestBein - Investimentos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="/codigo/assets/css/TIAWCSS.css">
</head>

<body>
    <a href="/codigo/pages/pagina-principal.html">
        <svg id="volta" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-square" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
        </svg>
    </a>  
    <h1>Investimentos</h1>
    <!--  Caso queira colocar a pagina de cadastro
    <a href="index.html">PAGINA DE CADASTRO</a> -->
    <div class="container">
        <div class="row">
            <div id="msg" class="col-sm-10 offset-sm-1 ">
                <!--<div class="alert alert-warning">Contato não encontrado.</div>-->
            </div>
        </div>

        

        <form id="form-contato">
            <div class="form-group row">
                <div class="col-sm-3">
                    <select name="filtro_cidade" id="filtro_cidade" onchange="ListaContatos()" class="form-control">
                        <option value="">Risco</option>
                        <option value="Baixo">Baixo</option>
                        <option value="Médio">Médio</option>
                        <option value="Alto">Alto</option>
                    </select>
                </div>
                <div class="col-sm-3">
                    <select name="filtro_categoria" id="filtro_categoria" onchange="ListaContatos()" class="form-control">
                        <option value="">Prazo</option>
                        <option value="Curto">Curto</option>
                        <option value="Médio">Médio</option>
                        <option value="Longo">Longo</option>
                    </select>
                </div>
                <div class="col-sm-4">
                    <select name="filtro_tipo" id="filtro_tipo" onchange="ListaContatos()" class="form-control">
                        <option value="">Categoria/Tipo</option>
                        <option value="Renda Fixa">Renda Fixa</option>
                        <option value="Fundo">Fundo</option>
                        <option value="Tesouro Direto">Tesouro Direto</option>
                        <option value="Renda Variáve">Renda Variável</option>
                        <option value="Poupança">Poupança</option>
                        <option value="Providência Privada">Providência Privada</option>
                        <option value="COE">COE</option>
                        <option value="Criptomoeda">Criptomoeda</option>
                    </select>
                </div>
            </div>
        </form>

        <div class="row" id="cards-container">
        </div>
    </div>

    <script src="/codigo/assets/js/filtro.js"></script>
    <script>
        // carrega os dados a partir da API JSONServer
        var db = []
        readContato(dados => {
            db = dados;
            ListaContatos();
        });

        // função para listar na tabela os contatos que estão associados aos filtros 
        function ListaContatos() {

            // Obtem os dados informados pelo usuário nos filtros
            let fc = document.getElementById('filtro_cidade').value;
            let fcg = document.getElementById('filtro_categoria').value;
            let ft = document.getElementById('filtro_tipo').value;

            // limpa a lista de contatos apresentados
            let cardsContainer = document.getElementById("cards-container");
            cardsContainer.innerHTML = "";

            // Popula a tabela com os registros do banco de dados
            for (let index = 0; index < db.length; index++) {
                const contato = db[index];

                // Verifica se os dados do contato batem com os filtros
                if (((contato.risco == fc) || (fc == '')) &&
                    ((contato.prazo == fcg) || (fcg == '')) &&
                    ((contato.categoria == ft) || (ft == ''))) {

                    // Inclui o contato no container    
                    cardsContainer.innerHTML += `<div class="col-sm-4">
                                                    <div class="card">
                                                        <div class="card-header">
                                                            ${contato.nome}
                                                        </div>
                                                        <div class="card-body">
                                                            <p><strong>Preço:</strong> ${contato.preco}</p>
                                                            <p><strong>Categoria:</strong> ${contato.categoria}</p>
                                                            <p><strong>Risco:</strong> ${contato.risco}</p>
                                                            <p><strong>Prazo:</strong> ${contato.prazo}</p>
                                                           
                                                        </div>
                                                    </div>
                                                </div>`;
                }
            }

        }
    </script>

</body>

</html>
